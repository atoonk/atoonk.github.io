<!DOCTYPE html>
<!--
    Design by:
    ——————————
        GODO FREDO
        ✉ https://godofredo.ninja
        ✎ @GodoFredoNinja
        ✈ Lima - Perú
-->
<html lang="en" data-theme="light">
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />

    <title>Building a high available Anycast application in 5 minutes on Packet</title>

    <meta name="HandheldFriendly" content="True" />
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link href="https://fonts.googleapis.com/css?family=Domine&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Rubik:400,500,700&display=swap" rel="stylesheet">

    <link rel="stylesheet" type="text/css" href="../assets/styles/main.css%3Fv=8201fb5932.css"/>

    <link rel="icon" href="../favicon.png" type="image/png" />
    <link rel="canonical" href="index.html" />
    <meta name="referrer" content="no-referrer-when-downgrade" />
    <link rel="amphtml" href="amp.html" />
    
    <meta property="og:site_name" content="Andree&#x27;s Musings" />
    <meta property="og:type" content="article" />
    <meta property="og:title" content="Building a high available Anycast application in 5 minutes on Packet" />
    <meta property="og:description" content="As the demand on our applications and infrastructure grow, it becomes more important to be able to quickly deploy your applications and supporting infrastructure in a safe, fast and scalable way. Luckily the tooling and various cloud providers are catching up and making this a lot easier for us." />
    <meta property="og:url" content="http://toonk.io/building-a-high-available-anycast-application-in-5-minutes-on-packet/" />
    <meta property="og:image" content="https://images.unsplash.com/photo-1486411959861-41a3eb8da389?ixlib&#x3D;rb-1.2.1&amp;q&#x3D;80&amp;fm&#x3D;jpg&amp;crop&#x3D;entropy&amp;cs&#x3D;tinysrgb&amp;w&#x3D;2000&amp;fit&#x3D;max&amp;ixid&#x3D;eyJhcHBfaWQiOjExNzczfQ" />
    <meta property="article:published_time" content="2019-02-24T00:00:00.000Z" />
    <meta property="article:modified_time" content="2020-09-05T19:20:51.000Z" />
    <meta property="article:tag" content="anycast" />
    <meta property="article:tag" content="networking" />
    <meta property="article:tag" content="terraform" />
    
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="Building a high available Anycast application in 5 minutes on Packet" />
    <meta name="twitter:description" content="As the demand on our applications and infrastructure grow, it becomes more important to be able to quickly deploy your applications and supporting infrastructure in a safe, fast and scalable way. Luckily the tooling and various cloud providers are catching up and making this a lot easier for us." />
    <meta name="twitter:url" content="http://toonk.io/building-a-high-available-anycast-application-in-5-minutes-on-packet/" />
    <meta name="twitter:image" content="https://images.unsplash.com/photo-1486411959861-41a3eb8da389?ixlib&#x3D;rb-1.2.1&amp;q&#x3D;80&amp;fm&#x3D;jpg&amp;crop&#x3D;entropy&amp;cs&#x3D;tinysrgb&amp;w&#x3D;2000&amp;fit&#x3D;max&amp;ixid&#x3D;eyJhcHBfaWQiOjExNzczfQ" />
    <meta name="twitter:label1" content="Written by" />
    <meta name="twitter:data1" content="Andree Toonk" />
    <meta name="twitter:label2" content="Filed under" />
    <meta name="twitter:data2" content="anycast, networking, terraform" />
    <meta name="twitter:site" content="@atoonk" />
    <meta name="twitter:creator" content="@atoonk" />
    <meta property="og:image:width" content="2000" />
    <meta property="og:image:height" content="1333" />
    
    <script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "Article",
    "publisher": {
        "@type": "Organization",
        "name": "Andree&#x27;s Musings",
        "url": "http://toonk.io/",
        "logo": {
            "@type": "ImageObject",
            "url": "http://toonk.io/content/images/2020/09/download-5.png",
            "width": 60,
            "height": 60
        }
    },
    "author": {
        "@type": "Person",
        "name": "Andree Toonk",
        "image": {
            "@type": "ImageObject",
            "url": "http://toonk.io/content/images/2020/09/andreetoonk.png",
            "width": 360,
            "height": 360
        },
        "url": "http://toonk.io/author/andree/",
        "sameAs": [
            "http://toonk.io/about/",
            "https://twitter.com/atoonk"
        ]
    },
    "headline": "Building a high available Anycast application in 5 minutes on Packet",
    "url": "http://toonk.io/building-a-high-available-anycast-application-in-5-minutes-on-packet/",
    "datePublished": "2019-02-24T00:00:00.000Z",
    "dateModified": "2020-09-05T19:20:51.000Z",
    "image": {
        "@type": "ImageObject",
        "url": "https://images.unsplash.com/photo-1486411959861-41a3eb8da389?ixlib=rb-1.2.1&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=2000&fit=max&ixid=eyJhcHBfaWQiOjExNzczfQ",
        "width": 2000,
        "height": 1333
    },
    "keywords": "anycast, networking, terraform",
    "description": "As the demand on our applications and infrastructure grow, it becomes more important to be able to quickly deploy your applications and supporting infrastructure in a safe, fast and scalable way. Luckily the tooling and various cloud providers are catching up and making this a lot easier for us.",
    "mainEntityOfPage": {
        "@type": "WebPage",
        "@id": "http://toonk.io/"
    }
}
    </script>

    <meta name="generator" content="Ghost 3.34" />
    <link rel="alternate" type="application/rss+xml" title="Andree&#x27;s Musings" href="../rss/index.html" />
    <!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-177223425-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-177223425-1');
</script>

    <script>
        if (typeof(Storage) !== 'undefined') {
            var selectTheme = localStorage.getItem('selected-theme');
            if (selectTheme === 'dark') {
                document.documentElement.setAttribute('data-theme', 'dark')
            } else if (selectTheme === 'light') {
                document.documentElement.setAttribute('data-theme', 'light');
            }
        }
    </script>
</head>
<body class="is-article">
    <div class="site-wrapper u-flexColumnTop">
        <header class="header u-sizeFullWidth u-fontSizeSmaller u-bgheader u-flexCenter">
    <div class="header-wrap u-flexCenter container u-flex1">
        <div class="header-left u-flex0">
            <a href="../index.html"
                class="header-logo u-block u-lineHeight1 godo-tracking"
                data-event-category="Header"
                data-event-action="Logo"
                data-event-label="Click"
                data-event-non-interaction="true">
                    <img src="../content/images/size/w600/2020/09/download-5.png" alt="Andree&#x27;s Musings"/>
            </a>
        </div>

        <nav class="header-center u-relative mainMenu u-overflowHidden u-flex u-flex1 u-paddingRight20 u-flexCenter u-hide-before-lg u-menu-color">
            <ul class="nav" role="menu">
    <li role="menuitem"><a href="../index.html" class="nav-home">Home</a></li>
    <li role="menuitem"><a href="../contact/index.html" class="nav-contact">Contact</a></li>
    <li role="menuitem"><a href="../about/index.html" class="nav-about">About</a></li>
</ul>
        </nav>

        <div class="header-right u-flex0 u-flex u-flexEnd u-menu-color">
                <div class="js-social-media social-media u-flex">
    
    <a class="godo-tracking" data-event-category="Header" data-event-action="Social" data-event-label="Twitter" data-event-non-interaction="true" title="Twitter @atoonk" aria-label="Twitter @atoonk" href="https://twitter.com/atoonk" target="_blank" rel="noopener noreferrer">
        <svg class="icon icon--twitter"><use xlink:href="#icon-twitter"></use></svg>
    </a>
</div>

            <div class="header-action u-flexCenter">
                <a href="javascript:;" class="js-dark-mode hla header-dark-mode" aria-label="Dark and Light Mode" >
                    <svg class="icon icon--moon"><use xlink:href="#icon-moon"></use></svg>
                    <svg class="icon icon--sunny u-hide"><use xlink:href="#icon-sunny"></use></svg>
                </a>

                <a href="javascript:;"
                    aria-label="Toggle Search"
                    class="js-search-open nav-search godo-tracking u-pointer u-hide"
                    data-event-category="Header"
                    data-event-action="Search"
                    data-event-label="Click"
                    data-event-non-interaction="true">
                    <svg class="icon icon--search"><use xlink:href="#icon-search"></use></svg>
                </a>

                <div class="js-menu-toggle menu-burger u-relative u-hide-after-lg u-pointer"><span></span><span></span><span></span></div>
            </div>
        </div>
    </div>
</header>

<aside class="sideNav u-fixed u-absolute0 u-hide-after-lg u-bgheader">
    <div class="sideNav-wrap u-absolute0">
        <nav class="sideNav-menu sideNav-section">
            <ul class="nav" role="menu">
    <li role="menuitem"><a href="../index.html" class="nav-home">Home</a></li>
    <li role="menuitem"><a href="../contact/index.html" class="nav-contact">Contact</a></li>
    <li role="menuitem"><a href="../about/index.html" class="nav-about">About</a></li>
</ul>
        </nav>

        <div class="sideNav-section">
            <div class="js-social-media social-media u-flex">
    
    <a class="godo-tracking" data-event-category="Header" data-event-action="Social" data-event-label="Twitter" data-event-non-interaction="true" title="Twitter @atoonk" aria-label="Twitter @atoonk" href="https://twitter.com/atoonk" target="_blank" rel="noopener noreferrer">
        <svg class="icon icon--twitter"><use xlink:href="#icon-twitter"></use></svg>
    </a>
</div>
        </div>

    </div>
</aside>


        <main class="main u-relative ">



<article class="post u-marginBottom40 u-relative">
    <header class="post-header u-container u-maxWidth740 u-paddingTop30 u-relative zindex3">
    <h1 class="post-title u-marginBottom20 u-fontSizeLargest u-md-fontSize36">Building a high available Anycast application in 5 minutes on Packet</h1>
    <p class="post-excerpt u-marginBottom30 u-fontSize22 u-textMuted">As the demand on our applications and infrastructure grow, it becomes more important to be able to quickly deploy your applications and supporting infrastructure in a safe, fast and scalable way. Luckily the tooling and various cloud providers are catching up and making this a lot easier for us.</p>

    <hr>

    <div class="u-flex post-share">
        <div class="hh u-flex u-flexCenter u-relative zindex4 u-flex1">
    <ul class="hh-author u-flex u-flexWrap u-flex0">
        <li class="hh-author-item u-realtive">
            <a href="../author/andree/index.html" title="Go to the profile of Andree Toonk" class="u-relative u-block avatar-image img-md">
                <img
                    class="u-absolute u-image u-block u-round"
                    src="../content/images/size/w100/2020/09/andreetoonk.png"
                    alt="Go to the profile of  Andree Toonk"
                />
            </a>
        </li>
    </ul>

    <div class="hh-right u-flex1 u-overflowHidden">
        <div class="hh-author-name u-fontSize15 u-noWrapWithEllipsis"><a href="../author/andree/index.html">Andree Toonk</a></div>

        <div class="hh-date u-flexCenter u-textMuted u-fontSizeSmaller">
    <time class="datetime u-textCapitalize" datetime="2019-02-24">24 Feb 2019</time>
    <span class="bull">&bull;</span>
    <span class="readingTime" style="cursor:default" title="7 min read">7 min read</span>
    
</div>    </div>
</div>
        <aside class="post-shasre u-flex0 u-flexCenter u-hide-before-md">
            <span class="share-label u-textMuted u-fontSizeSmaller">Share:</span>
            <a href="https://twitter.com/share?text=Building%20a%20high%20available%20Anycast%20application%20in%205%20minutes%20on%20Packet&amp;url=http://toonk.io/building-a-high-available-anycast-application-in-5-minutes-on-packet/"
                target="_blank"
                rel="noopener noreferrer"
                aria-label="Share on Twitter"
                class="share-link button button--circle godo-tracking js-share">
                <svg class="icon"><use xlink:href="#icon-twitter"></use></svg>
            </a>
            <a href="https://www.linkedin.com/shareArticle?mini=true&url=http://toonk.io/building-a-high-available-anycast-application-in-5-minutes-on-packet/&amp;title=Building%20a%20high%20available%20Anycast%20application%20in%205%20minutes%20on%20Packet"
                target="_blank"
                rel="noopener noreferrer"
                aria-label="Share on Linkedin"
                class="share-link button button--circle godo-tracking js-share">
                <svg class="icon"><use xlink:href="#icon-linkedin"></use></svg>
            </a>
            <a href="https://www.facebook.com/sharer/sharer.php?u=http://toonk.io/building-a-high-available-anycast-application-in-5-minutes-on-packet/"
                target="_blank"
                rel="noopener noreferrer"
                aria-label="Share on Facebook"
                class="share-link button button--circle godo-tracking js-share">
                <svg class="icon"><use xlink:href="#icon-facebook"></use></svg>
            </a>
        </aside>
    </div>
</header>
        <figure class="post-image u-block u-marginAuto u-sizeFullHeight u-sizeFullWidth u-maxWidth1000">
            <img class="u-block u-marginAuto u-sizeFullWidth simply-zoom"
                srcset="https://images.unsplash.com/photo-1486411959861-41a3eb8da389?ixlib&#x3D;rb-1.2.1&amp;q&#x3D;80&amp;fm&#x3D;jpg&amp;crop&#x3D;entropy&amp;cs&#x3D;tinysrgb&amp;w&#x3D;2000&amp;fit&#x3D;max&amp;ixid&#x3D;eyJhcHBfaWQiOjExNzczfQ 300w,
                        https://images.unsplash.com/photo-1486411959861-41a3eb8da389?ixlib&#x3D;rb-1.2.1&amp;q&#x3D;80&amp;fm&#x3D;jpg&amp;crop&#x3D;entropy&amp;cs&#x3D;tinysrgb&amp;w&#x3D;2000&amp;fit&#x3D;max&amp;ixid&#x3D;eyJhcHBfaWQiOjExNzczfQ 600w,
                        https://images.unsplash.com/photo-1486411959861-41a3eb8da389?ixlib&#x3D;rb-1.2.1&amp;q&#x3D;80&amp;fm&#x3D;jpg&amp;crop&#x3D;entropy&amp;cs&#x3D;tinysrgb&amp;w&#x3D;2000&amp;fit&#x3D;max&amp;ixid&#x3D;eyJhcHBfaWQiOjExNzczfQ 1000w,
                        https://images.unsplash.com/photo-1486411959861-41a3eb8da389?ixlib&#x3D;rb-1.2.1&amp;q&#x3D;80&amp;fm&#x3D;jpg&amp;crop&#x3D;entropy&amp;cs&#x3D;tinysrgb&amp;w&#x3D;2000&amp;fit&#x3D;max&amp;ixid&#x3D;eyJhcHBfaWQiOjExNzczfQ 2000w"
                sizes="(max-width: 400px) 300px,(max-width: 730px) 600px, (max-width: 1600px) 100vw"
                src="https://images.unsplash.com/photo-1486411959861-41a3eb8da389?ixlib&#x3D;rb-1.2.1&amp;q&#x3D;80&amp;fm&#x3D;jpg&amp;crop&#x3D;entropy&amp;cs&#x3D;tinysrgb&amp;w&#x3D;2000&amp;fit&#x3D;max&amp;ixid&#x3D;eyJhcHBfaWQiOjExNzczfQ"
                alt="Building a high available Anycast application in 5 minutes on Packet"
            />
        </figure>

    <div class="post-wrap u-maxWidth1000 u-relative u-marginAuto">
        <div id="post-body" class="post-body u-container u-maxWidth740 u-relative"><p></p><p>In my <a href="https://medium.com/@atoonk/experimenting-with-stackpath-edge-computing-and-anycast-f335ba86e60d">previous blog,</a> we took a peek at Stackpath’s Workload features with Anycast. In this blog we will take a look at one of my other favorite compute providers: <a href="https://www.packet.com/" rel="noopener">Packet</a> and we will use <a href="https://www.terraform.io/" rel="noopener">Terraform</a> to describe and deploy our infrastructure as code.</p><h4 id="packet"><strong>Packet</strong></h4><p>I have been using Packet for about 1,5 years now for various projects. There are a few things why I like Packet. It all started with their BGP and Anycast support, yup BGP straight to your server! That combined with their powerful bare-metal compute options, great customer success team and excellent Terraform support makes Packet one of my go-to supplier for my pet projects.</p><h3 id="what-are-we-building">What are we building?</h3><p>Alright, let’s dive in! A brief description of what we’re going to build today: We have a small <a href="https://github.com/atoonk/packet_anycast/blob/master/scripts/web.go" rel="noopener">Golang web application</a> that does nothing more than print the machine’s hostname. We want this application to be highly available and deployed to various locations around the world so that our users can access it with low latency. In our case, we are going to deploy this to four Packet datacenters around the globe, with two instances in each datacenter. Each Packet server will have BGP enabled, and we’ll use Anycast for load balancing and high availability.</p><p>Using the Packet Terraform provider we can do all of this in an automated way, allowing me to all this in less than five minutes! Sounds like fun? Alright, let’s dive in.</p><h3 id="terraform">Terraform</h3><p>We could provision our servers using the web portal, but the ability to describe our infrastructure as code using Terraform is a lot easier and allows us to grow and shrink our deployment easily. If you’d like to play with this yourself and follow along: you can find the code for this demo on <a href="https://github.com/atoonk/packet_anycast" rel="noopener">my Github page here.</a> <br>Next up we will take a brief look at the important parts of the Terraform code.</p><p>First off we create a project in Packet, set some BGP parameters for this project (AS number and optionally a password). Next up comes the cool part, we reserve what Packet calls a <code>global IPv4 address</code>. This IP address is the Anycast address that we’ll be using and will be announced to Packet using the Bird BGP daemon from all our servers.</p><pre><code>provider "packet" {
 auth_token = "${var.packet_api_key}"
}
# Create project
resource "packet_project" "anycast_test" {
 name = "anycast project"
 bgp_config {
 deployment_type = "local"
 #md5 = "${var.bgp_password}"
 asn = 65000
 }
}
# Create a Global IPv4 IP to be used for Anycast
# the Actual Ip is available as: packet_reserved_ip_block.anycast_ip.address
# We'll pass that along to each compute node, so they can assign it to all nodes and announce it in BGP
resource "packet_reserved_ip_block" "anycast_ip" {
 project_id = "${packet_project.anycast_test.id}"
 type = "global_ipv4"
 quantity = 1
}</code></pre><p>Next up we define where we want to deploy our compute nodes to, and how many per datacenter.</p><pre><code>module "compute_sjc" {
 source = "./modules/compute"
 project_id = "${packet_project.anycast_test.id}"
 anycast_ip = "${packet_reserved_ip_block.anycast_ip.address}"
 operating_system = "ubuntu_18_04"
 instance_type = "baremetal_0"
 facility = "sjc1"
 compute_count = "2"
}
module "compute_nrt" {
 source = "./modules/compute"
 project_id = "${packet_project.anycast_test.id}"
 anycast_ip = "${packet_reserved_ip_block.anycast_ip.address}"
 operating_system = "ubuntu_18_04"
 instance_type = "baremetal_0"
 facility = "nrt1"
 compute_count = "2"
}
module "compute_ams" {
 source = "./modules/compute"
 project_id = "${packet_project.anycast_test.id}"
 anycast_ip = "${packet_reserved_ip_block.anycast_ip.address}"
 operating_system = "ubuntu_18_04"
 instance_type = "baremetal_0"
 facility = "ams1"
 compute_count = "2"
}
module "compute_ewr" {
 source = "./modules/compute"
 project_id = "${packet_project.anycast_test.id}"
 anycast_ip = "${packet_reserved_ip_block.anycast_ip.address}"
 operating_system = "ubuntu_18_04"
 instance_type = "baremetal_0"
 facility = "ewr1"
 compute_count = "2"
}</code></pre><p>I created a module to define the compute node, with that we can easily create many of them in the various datacenters. In the example above I created two instances in the following locations: San Jose (<code>sjc1</code>), Tokyo (<code>nrt1</code>), Amsterdam (<code>ams1</code>) and New York (<code>ewr1</code>).</p><p>Let’s take a quick look at the compute module:</p><pre><code>variable facility { }
variable project_id { }
variable compute_count { }
variable operating_system { }
variable instance_type { }
variable anycast_ip { }
#variable bgp_password { }

resource "packet_device" "compute-server" {
 hostname = "${format("compute-%03d", count.index)}.${var.facility}"
 count = "${var.compute_count}"
 plan = "${var.instance_type}"
 facilities = ["${var.facility}"]
 operating_system = "${var.operating_system}"
 billing_cycle = "hourly"
 project_id = "${var.project_id}"

provisioner "local-exec" {
 command = "scp -o StrictHostKeyChecking=no -o UserKnownHostsFile=/dev/null scripts/create_bird_conf.sh root@${self.access_public_ipv4}:/root/create_bird_conf.sh"
 }

provisioner "local-exec" {
 command = "scp -o StrictHostKeyChecking=no -o UserKnownHostsFile=/dev/null scripts/web.go root@${self.access_public_ipv4}:/root/web.go"
 }

 provisioner "local-exec" {
 command = "scp -o StrictHostKeyChecking=no -o UserKnownHostsFile=/dev/null scripts/start.sh root@${self.access_public_ipv4}:/root/start.sh"
 }
 
 provisioner "local-exec" {
 command = "ssh -o StrictHostKeyChecking=no -o UserKnownHostsFile=/dev/null root@${self.access_public_ipv4} 'bash /root/start.sh ${var.anycast_ip} &gt; /dev/null 2&gt;&amp;1 '"
 }
}

#Enable BGP for the newly creates compute node
resource "packet_bgp_session" "test" {
 count = "${var.compute_count}"
 device_id = "${packet_device.compute-server.*.id[count.index]}"
 address_family = "ipv4"
}</code></pre><p>Alright that’s quite a bit of text, luckily most of it is pretty descriptive. The code above creates the compute node we requested at the specified datacenter. You will also see a few <code>local-exec</code> statements; these instruct Terraform to execute a script locally as soon as the instance is created. In this case, I used it to secure copy (scp) some files over and run <code>start.sh</code> on the compute node. Once you have more tasks, it will be easier and cleaner to replace this with an ansible playbook, but this will work just fine for now. <br>The <code><a href="https://github.com/atoonk/packet_anycast/blob/master/scripts/start.sh" rel="noopener">start.sh</a></code> script installs Bird (the BGP daemon), generates the correct Bird BGP config, restarts Bird and starts our Golang web service. Finally, we instruct Terraform to enable BGP on the Packet side for each of our compute nodes.</p><p>And we’re done! With this, we should be able to deploy our infrastructure using the commands below, and within 5 minutes we should have our application deployed globally with an Anycast IP.<br>So enough talking, let’s ask Terraform to build our infrastructure:</p><pre><code class="language-bash">terraform plan
terraform apply</code></pre><p>While we wait, let’s keep an eye on the Packet portal to see what global IP we’ve been allocated. In my case, it’s 147.75.40.35/32.</p><figure class="kg-card kg-image-card kg-width-wide"><img src="https://cdn-images-1.medium.com/max/2400/0*xM4dk9oTnmmlunnX" class="kg-image" alt></figure><p>Once Terraform is done you’ll see something like this.<br><code>Apply complete! Resources: 18 added, 0 changed, 0 destroyed.</code></p><p>In this case, the 18 resources include: 1 Project, 1 Global IP, 8 compute nodes and 8 BGP sessions. In my case that took just 5 minutes! That’s amazing, eight new bare-metal machines, fully deployed, BGP running with an Anycast IP and my App deployed to various datacenters around the world, load balanced and all. A few years ago that was almost unthinkable.</p><p>The Packet portal also shows the eight compute instances I requested with the hostnames and unicast IP addresses.</p><figure class="kg-card kg-image-card kg-width-wide"><img src="https://cdn-images-1.medium.com/max/2400/0*ORbtFYiMzQpHATgF" class="kg-image" alt></figure><h3 id="time-to-test">Time to test</h3><p>Alright so now this is all deployed we should be all done! Let’s test our Go web application using my local machine, it should be reachable via <a href="http://147.75.40.35" rel="nofollow noopener noopener">http://147.75.40.35</a> … boom! There it is.</p><figure class="kg-card kg-image-card"><img src="https://cdn-images-1.medium.com/max/1600/1*D33w3GdFu2bto2lZoj7OvQ.png" class="kg-image" alt></figure><h3 id="testing-anycast">Testing Anycast</h3><p>Cool, it works! I’m hitting the compute node in San Jose, which is as expected since that is closest to Vancouver, Canada. Next up let’s test from a few locations around the world to make sure Anycast routing works as expected. The screenshot below shows tests from a handful of servers outside the Packet network. Here I’m testing from Palo Alto, New York, Amsterdam, and New York. In all cases, we’re getting routed to the expected closest location, and in all cases, the requests are being load balanced between the two instances in a datacenter.</p><figure class="kg-card kg-image-card kg-width-wide kg-card-hascaption"><img src="https://cdn-images-1.medium.com/max/2400/0*G2umtsbNJoDDEVgN" class="kg-image" alt><figcaption>Curl tests from around the world to test Anycast Load Balancing</figcaption></figure><p>Now let’s say our web application all of a sudden becomes popular in Japan and in order to keep up with demand we need to scale up our resources there. Doubling our capacity in Tokyo is easy. All we do is edit the <code>cluster.tf </code>Terraform file and change the compute count number from 2 to 4.</p><figure class="kg-card kg-image-card kg-card-hascaption"><img src="https://cdn-images-1.medium.com/max/1200/1*aeIxPrcq0U-TE98XzQw4aA.png" class="kg-image" alt><figcaption>Scaling out our capacity in Tokyo to 4&nbsp;nodes</figcaption></figure><p>Run <code>terraform plan</code> and <code>terraform apply, </code>wait 5 minutes and voila. A few minutes later I indeed see that our clients hitting the Tokyo datacenter are indeed being load balanced over four instances now (<code>compute-000.nrt1 compute-001.nrt1 compute-002.nrt1 compute-003.nrt1</code>), instead of the two previously.</p><h3 id="summary">Summary</h3><p>In this post we looked at deploying our little Golang App to 4 datacenters around the world with two instances per datacenter. We demonstrated how we can scale up deployments and how clients are being routed to the closest datacenter to guarantee low latency and saw requests being load balanced between the instances.</p><p>Even though we used actual bare-metal machines, the experience is mostly the same as deploying VM’s. I used the smallest instance type available to keep cost down. The Tiny But Mighty t1-small that I used is a 4 Core (atom C2550)CPU, 8GB RAM, with SSD storage and 2.5Gbps network connectivity for just $0.07 per hour, great for pet project likes these.<br>Packet provides many different configurations, should you need more powerful hardware, make sure to check out <a href="https://www.packet.com/cloud/servers/" rel="noopener">all options here</a>.</p><p>The power of Terraform really shines for use-cases like this. Kudos to Packet for having excellent Terraform support, it’s pretty cool to do all of the above, including requesting a global Anycast IP using Terraform. The complete deployment takes about 5 minutes, no matter how many datacenters or instances.</p><p>Defining and deploying your applications like we did here, using infrastructure as code and Anycast used to be reserved for the large CDN’s, DNS and major infrastructure providers. Packet now makes it easy for everyone to build high available and low latency infrastructure. Working with Packet has been a great experience and I recommend everyone to give it a spin.</p></div>
    </div>

    <footer class="post-footer u-container u-maxWidth740">
            <div class="post-tags buttonSet u-marginTop30">
        <a href="../tag/anycast/index.html" title="anycast" class="button button--tags godo-tracking" data-event-category="Article" data-event-action="Tags" data-event-label="anycast" data-event-non-interaction="true">anycast</a><a href="../tag/networking/index.html" title="networking" class="button button--tags godo-tracking" data-event-category="Article" data-event-action="Tags" data-event-label="networking" data-event-non-interaction="true">networking</a><a href="../tag/terraform/index.html" title="terraform" class="button button--tags godo-tracking" data-event-category="Article" data-event-action="Tags" data-event-label="terraform" data-event-non-interaction="true">terraform</a>
    </div>

        <hr>
        <div class="prev-next">
                <div class="u-flex u-relative godo-tracking u-marginBottom30"
    data-event-category="Article"
    data-event-action="Previous article"
    data-event-label="http://toonk.io/experimenting-with-stackpath-edge-computing-and-anycast/"
    data-event-non-interaction="true">

    <a href="../experimenting-with-stackpath-edge-computing-and-anycast/index.html" class="prev-next-image-link u-relative u-bgColorGrayLight u-flex0" aria-label="Experimenting with StackPath Edge Computing and Anycast">
        <img class="u-absolute u-image blur-up lazyload" data-src="https://images.unsplash.com/photo-1564425583885-822a00f3e1e6?ixlib&#x3D;rb-1.2.1&amp;q&#x3D;80&amp;fm&#x3D;jpg&amp;crop&#x3D;entropy&amp;cs&#x3D;tinysrgb&amp;w&#x3D;2000&amp;fit&#x3D;max&amp;ixid&#x3D;eyJhcHBfaWQiOjExNzczfQ" alt="Experimenting with StackPath Edge Computing and Anycast"/>
    </a>

    <div class="prev-next-body u-paddingLeft20 u-flex1">
        <div class="u-fontSizeSmaller u-lineHeight1 u-textMuted u-marginBottom10">Previous article</div>
        <h2 class="prev-next-title u-contentTitle u-marginBottom10 u-fontSize21"><a href="../experimenting-with-stackpath-edge-computing-and-anycast/index.html" class="u-relative zindex3">Experimenting with StackPath Edge Computing and Anycast</a></h2>
        <p class="prev-next-excerpt u-fontSizeSmall u-textMuted u-lineClamp2 u-lineHeightTight">I love tinkering with new tech, and since it was a cold and snowy weekend here in Vancouver, I figured I’d explore Edge Containers</p>
    </div>

    <a href="../experimenting-with-stackpath-edge-computing-and-anycast/index.html" aria-label="Experimenting with StackPath Edge Computing and Anycast" class="u-absolute0 zindex2"></a>
</div>
                <div class="u-flex u-relative godo-tracking "
    data-event-category="Article"
    data-event-action="Next article"
    data-event-label="http://toonk.io/building-a-high-available-anycast-service-using-aws-global-accelerator/"
    data-event-non-interaction="true">

    <a href="../building-a-high-available-anycast-service-using-aws-global-accelerator/index.html" class="prev-next-image-link u-relative u-bgColorGrayLight u-flex0" aria-label="Building a high available Anycast service using AWS Global Accelerator">
        <img class="u-absolute u-image blur-up lazyload" data-src="https://images.unsplash.com/photo-1544161497-6095fb868d58?ixlib&#x3D;rb-1.2.1&amp;q&#x3D;80&amp;fm&#x3D;jpg&amp;crop&#x3D;entropy&amp;cs&#x3D;tinysrgb&amp;w&#x3D;2000&amp;fit&#x3D;max&amp;ixid&#x3D;eyJhcHBfaWQiOjExNzczfQ" alt="Building a high available Anycast service using AWS Global Accelerator"/>
    </a>

    <div class="prev-next-body u-paddingLeft20 u-flex1">
        <div class="u-fontSizeSmaller u-lineHeight1 u-textMuted u-marginBottom10">Next article</div>
        <h2 class="prev-next-title u-contentTitle u-marginBottom10 u-fontSize21"><a href="../building-a-high-available-anycast-service-using-aws-global-accelerator/index.html" class="u-relative zindex3">Building a high available Anycast service using AWS Global Accelerator</a></h2>
        <p class="prev-next-excerpt u-fontSizeSmall u-textMuted u-lineClamp2 u-lineHeightTight">In my last two blogs, I wrote about building highly available applications using anycast on Packet and Stackpath. Today we’ll look at how to do this on AWS using its recently released service: Global Accelerator.</p>
    </div>

    <a href="../building-a-high-available-anycast-service-using-aws-global-accelerator/index.html" aria-label="Building a high available Anycast service using AWS Global Accelerator" class="u-absolute0 zindex2"></a>
</div>        </div>
        <hr>
    </footer>
</article>



<div class="post-related u-bgColorGrayLight">
    <div class="u-container u-maxWidth1200">
        <div class="row">

            <div class="col s12 u-marginBottom40 u-textAlignCenter">
                <h3 class="u-contentTitle u-fontSizeLarger">Related <span class='text-success'>Articles</span></h3>
            </div>

            <div class="col s12 m6 l4 u-flex">
                <div class="cr u-overflowHidden u-flexColumnTop u-relative u-flex1 godo-tracking" data-event-category="Article" data-event-action="Related Posts" data-event-label="http://toonk.io/the-risks-and-dangers-of-amplified-routing-loops/" data-event-non-interaction="true">
    <a href="../the-risks-and-dangers-of-amplified-routing-loops/index.html" class="cr-img u-relative u-overflowHidden u-sizeFullWidth u-block">
        <img class="cr-imagen u-absolute u-image u-block blur-up lazyload"
            src="https://images.unsplash.com/photo-1522108203058-a1bb3c62f172?crop&#x3D;entropy&amp;cs&#x3D;tinysrgb&amp;fit&#x3D;max&amp;fm&#x3D;jpg&amp;ixid&#x3D;MnwxMTc3M3wwfDF8c2VhcmNofDI2fHx2YW5jb3V2ZXIlMjBsb29wfGVufDB8fHx8MTYxODE2ODkyNA&amp;ixlib&#x3D;rb-1.2.1&amp;q&#x3D;80&amp;w&#x3D;2000"
            srcset="https://images.unsplash.com/photo-1522108203058-a1bb3c62f172?crop&#x3D;entropy&amp;cs&#x3D;tinysrgb&amp;fit&#x3D;max&amp;fm&#x3D;jpg&amp;ixid&#x3D;MnwxMTc3M3wwfDF8c2VhcmNofDI2fHx2YW5jb3V2ZXIlMjBsb29wfGVufDB8fHx8MTYxODE2ODkyNA&amp;ixlib&#x3D;rb-1.2.1&amp;q&#x3D;80&amp;w&#x3D;2000"
            data-srcset="https://images.unsplash.com/photo-1522108203058-a1bb3c62f172?crop&#x3D;entropy&amp;cs&#x3D;tinysrgb&amp;fit&#x3D;max&amp;fm&#x3D;jpg&amp;ixid&#x3D;MnwxMTc3M3wwfDF8c2VhcmNofDI2fHx2YW5jb3V2ZXIlMjBsb29wfGVufDB8fHx8MTYxODE2ODkyNA&amp;ixlib&#x3D;rb-1.2.1&amp;q&#x3D;80&amp;w&#x3D;2000 300w,https://images.unsplash.com/photo-1522108203058-a1bb3c62f172?crop&#x3D;entropy&amp;cs&#x3D;tinysrgb&amp;fit&#x3D;max&amp;fm&#x3D;jpg&amp;ixid&#x3D;MnwxMTc3M3wwfDF8c2VhcmNofDI2fHx2YW5jb3V2ZXIlMjBsb29wfGVufDB8fHx8MTYxODE2ODkyNA&amp;ixlib&#x3D;rb-1.2.1&amp;q&#x3D;80&amp;w&#x3D;2000 600w"
            data-sizes="(max-width: 1000px) 400px, 600px"
            alt="The Risks and Dangers of Amplified Routing Loops."
        />
    </a>

    <div class="cr-inner u-padding15 u-flexColumnTop">
        <div class="cr-body">
                <h2 class="cr-t u-fontSize21 u-lineClamp2 u-contentTitle" style="margin-bottom:5px"><a href="../the-risks-and-dangers-of-amplified-routing-loops/index.html">The Risks and Dangers of Amplified Routing Loops.</a></h2>
        </div>

        <div class="hh-date u-flexCenter u-textMuted u-fontSizeSmaller">
    <time class="datetime u-textCapitalize" datetime="2021-04-13">13 Apr 2021</time>
    <span class="bull">&bull;</span>
    <span class="readingTime" style="cursor:default" title="7 min read">7 min read</span>
    
</div>    </div>

    <a href="../the-risks-and-dangers-of-amplified-routing-loops/index.html" class="u-absolute0 zindex3" aria-label="The Risks and Dangers of Amplified Routing Loops."></a>
</div>
            </div>
            <div class="col s12 m6 l4 u-flex">
                <div class="cr u-overflowHidden u-flexColumnTop u-relative u-flex1 godo-tracking" data-event-category="Article" data-event-action="Related Posts" data-event-label="http://toonk.io/introducing-ssh-zero-trust-identity-aware-tcp-sockets/" data-event-non-interaction="true">
    <a href="../introducing-ssh-zero-trust-identity-aware-tcp-sockets/index.html" class="cr-img u-relative u-overflowHidden u-sizeFullWidth u-block">
        <img class="cr-imagen u-absolute u-image u-block blur-up lazyload"
            src="https://images.unsplash.com/photo-1578223003535-35db3073ada7?crop&#x3D;entropy&amp;cs&#x3D;tinysrgb&amp;fit&#x3D;max&amp;fm&#x3D;jpg&amp;ixid&#x3D;MXwxMTc3M3wwfDF8c2VhcmNofDg4fHx2YW5jb3V2ZXIlMjBwZW9wbGV8ZW58MHx8fA&amp;ixlib&#x3D;rb-1.2.1&amp;q&#x3D;80&amp;w&#x3D;2000"
            srcset="https://images.unsplash.com/photo-1578223003535-35db3073ada7?crop&#x3D;entropy&amp;cs&#x3D;tinysrgb&amp;fit&#x3D;max&amp;fm&#x3D;jpg&amp;ixid&#x3D;MXwxMTc3M3wwfDF8c2VhcmNofDg4fHx2YW5jb3V2ZXIlMjBwZW9wbGV8ZW58MHx8fA&amp;ixlib&#x3D;rb-1.2.1&amp;q&#x3D;80&amp;w&#x3D;2000"
            data-srcset="https://images.unsplash.com/photo-1578223003535-35db3073ada7?crop&#x3D;entropy&amp;cs&#x3D;tinysrgb&amp;fit&#x3D;max&amp;fm&#x3D;jpg&amp;ixid&#x3D;MXwxMTc3M3wwfDF8c2VhcmNofDg4fHx2YW5jb3V2ZXIlMjBwZW9wbGV8ZW58MHx8fA&amp;ixlib&#x3D;rb-1.2.1&amp;q&#x3D;80&amp;w&#x3D;2000 300w,https://images.unsplash.com/photo-1578223003535-35db3073ada7?crop&#x3D;entropy&amp;cs&#x3D;tinysrgb&amp;fit&#x3D;max&amp;fm&#x3D;jpg&amp;ixid&#x3D;MXwxMTc3M3wwfDF8c2VhcmNofDg4fHx2YW5jb3V2ZXIlMjBwZW9wbGV8ZW58MHx8fA&amp;ixlib&#x3D;rb-1.2.1&amp;q&#x3D;80&amp;w&#x3D;2000 600w"
            data-sizes="(max-width: 1000px) 400px, 600px"
            alt="Introducing SSH zero trust, Identity aware TCP sockets"
        />
    </a>

    <div class="cr-inner u-padding15 u-flexColumnTop">
        <div class="cr-body">
                <h2 class="cr-t u-fontSize21 u-lineClamp2 u-contentTitle" style="margin-bottom:5px"><a href="../introducing-ssh-zero-trust-identity-aware-tcp-sockets/index.html">Introducing SSH zero trust, Identity aware TCP sockets</a></h2>
        </div>

        <div class="hh-date u-flexCenter u-textMuted u-fontSizeSmaller">
    <time class="datetime u-textCapitalize" datetime="2021-02-16">16 Feb 2021</time>
    <span class="bull">&bull;</span>
    <span class="readingTime" style="cursor:default" title="9 min read">9 min read</span>
    
</div>    </div>

    <a href="../introducing-ssh-zero-trust-identity-aware-tcp-sockets/index.html" class="u-absolute0 zindex3" aria-label="Introducing SSH zero trust, Identity aware TCP sockets"></a>
</div>
            </div>
            <div class="col s12 m6 l4 u-flex">
                <div class="cr u-overflowHidden u-flexColumnTop u-relative u-flex1 godo-tracking" data-event-category="Article" data-event-action="Related Posts" data-event-label="http://toonk.io/easy-multi-region-load-balancing-with-mysocket/" data-event-non-interaction="true">
    <a href="../easy-multi-region-load-balancing-with-mysocket/index.html" class="cr-img u-relative u-overflowHidden u-sizeFullWidth u-block">
        <img class="cr-imagen u-absolute u-image u-block blur-up lazyload"
            src="https://images.unsplash.com/photo-1544161519-0690a8886606?crop&#x3D;entropy&amp;cs&#x3D;tinysrgb&amp;fit&#x3D;max&amp;fm&#x3D;jpg&amp;ixid&#x3D;MXwxMTc3M3wwfDF8c2VhcmNofDY2fHx8ZW58MHx8fA&amp;ixlib&#x3D;rb-1.2.1&amp;q&#x3D;80&amp;w&#x3D;2000"
            srcset="https://images.unsplash.com/photo-1544161519-0690a8886606?crop&#x3D;entropy&amp;cs&#x3D;tinysrgb&amp;fit&#x3D;max&amp;fm&#x3D;jpg&amp;ixid&#x3D;MXwxMTc3M3wwfDF8c2VhcmNofDY2fHx8ZW58MHx8fA&amp;ixlib&#x3D;rb-1.2.1&amp;q&#x3D;80&amp;w&#x3D;2000"
            data-srcset="https://images.unsplash.com/photo-1544161519-0690a8886606?crop&#x3D;entropy&amp;cs&#x3D;tinysrgb&amp;fit&#x3D;max&amp;fm&#x3D;jpg&amp;ixid&#x3D;MXwxMTc3M3wwfDF8c2VhcmNofDY2fHx8ZW58MHx8fA&amp;ixlib&#x3D;rb-1.2.1&amp;q&#x3D;80&amp;w&#x3D;2000 300w,https://images.unsplash.com/photo-1544161519-0690a8886606?crop&#x3D;entropy&amp;cs&#x3D;tinysrgb&amp;fit&#x3D;max&amp;fm&#x3D;jpg&amp;ixid&#x3D;MXwxMTc3M3wwfDF8c2VhcmNofDY2fHx8ZW58MHx8fA&amp;ixlib&#x3D;rb-1.2.1&amp;q&#x3D;80&amp;w&#x3D;2000 600w"
            data-sizes="(max-width: 1000px) 400px, 600px"
            alt="Easy Multi-region load balancing with Mysocket.io"
        />
    </a>

    <div class="cr-inner u-padding15 u-flexColumnTop">
        <div class="cr-body">
                <h2 class="cr-t u-fontSize21 u-lineClamp2 u-contentTitle" style="margin-bottom:5px"><a href="../easy-multi-region-load-balancing-with-mysocket/index.html">Easy Multi-region load balancing with Mysocket.io</a></h2>
        </div>

        <div class="hh-date u-flexCenter u-textMuted u-fontSizeSmaller">
    <time class="datetime u-textCapitalize" datetime="2020-12-07">7 Dec 2020</time>
    <span class="bull">&bull;</span>
    <span class="readingTime" style="cursor:default" title="5 min read">5 min read</span>
    
</div>    </div>

    <a href="../easy-multi-region-load-balancing-with-mysocket/index.html" class="u-absolute0 zindex3" aria-label="Easy Multi-region load balancing with Mysocket.io"></a>
</div>
            </div>
            <div class="col s12 m6 l4 u-flex">
                <div class="cr u-overflowHidden u-flexColumnTop u-relative u-flex1 godo-tracking" data-event-category="Article" data-event-action="Related Posts" data-event-label="http://toonk.io/introducing-mysocket-io/" data-event-non-interaction="true">
    <a href="../introducing-mysocket-io/index.html" class="cr-img u-relative u-overflowHidden u-sizeFullWidth u-block">
        <img class="cr-imagen u-absolute u-image u-block blur-up lazyload"
            src="https://images.unsplash.com/photo-1519331582073-283f1a211a3e?ixlib&#x3D;rb-1.2.1&amp;q&#x3D;80&amp;fm&#x3D;jpg&amp;crop&#x3D;entropy&amp;cs&#x3D;tinysrgb&amp;w&#x3D;2000&amp;fit&#x3D;max&amp;ixid&#x3D;eyJhcHBfaWQiOjExNzczfQ"
            srcset="https://images.unsplash.com/photo-1519331582073-283f1a211a3e?ixlib&#x3D;rb-1.2.1&amp;q&#x3D;80&amp;fm&#x3D;jpg&amp;crop&#x3D;entropy&amp;cs&#x3D;tinysrgb&amp;w&#x3D;2000&amp;fit&#x3D;max&amp;ixid&#x3D;eyJhcHBfaWQiOjExNzczfQ"
            data-srcset="https://images.unsplash.com/photo-1519331582073-283f1a211a3e?ixlib&#x3D;rb-1.2.1&amp;q&#x3D;80&amp;fm&#x3D;jpg&amp;crop&#x3D;entropy&amp;cs&#x3D;tinysrgb&amp;w&#x3D;2000&amp;fit&#x3D;max&amp;ixid&#x3D;eyJhcHBfaWQiOjExNzczfQ 300w,https://images.unsplash.com/photo-1519331582073-283f1a211a3e?ixlib&#x3D;rb-1.2.1&amp;q&#x3D;80&amp;fm&#x3D;jpg&amp;crop&#x3D;entropy&amp;cs&#x3D;tinysrgb&amp;w&#x3D;2000&amp;fit&#x3D;max&amp;ixid&#x3D;eyJhcHBfaWQiOjExNzczfQ 600w"
            data-sizes="(max-width: 1000px) 400px, 600px"
            alt="Introducing Mysocket.io"
        />
    </a>

    <div class="cr-inner u-padding15 u-flexColumnTop">
        <div class="cr-body">
                <h2 class="cr-t u-fontSize21 u-lineClamp2 u-contentTitle" style="margin-bottom:5px"><a href="../introducing-mysocket-io/index.html">Introducing Mysocket.io</a></h2>
        </div>

        <div class="hh-date u-flexCenter u-textMuted u-fontSizeSmaller">
    <time class="datetime u-textCapitalize" datetime="2020-11-23">23 Nov 2020</time>
    <span class="bull">&bull;</span>
    <span class="readingTime" style="cursor:default" title="4 min read">4 min read</span>
    
</div>    </div>

    <a href="../introducing-mysocket-io/index.html" class="u-absolute0 zindex3" aria-label="Introducing Mysocket.io"></a>
</div>
            </div>
            <div class="col s12 m6 l4 u-flex">
                <div class="cr u-overflowHidden u-flexColumnTop u-relative u-flex1 godo-tracking" data-event-category="Article" data-event-action="Related Posts" data-event-label="http://toonk.io/aws-and-their-billions-in-ipv4-addresses/" data-event-non-interaction="true">
    <a href="../aws-and-their-billions-in-ipv4-addresses/index.html" class="cr-img u-relative u-overflowHidden u-sizeFullWidth u-block">
        <img class="cr-imagen u-absolute u-image u-block blur-up lazyload"
            src="https://images.unsplash.com/photo-1572288717056-ea97fb77c71e?ixlib&#x3D;rb-1.2.1&amp;q&#x3D;80&amp;fm&#x3D;jpg&amp;crop&#x3D;entropy&amp;cs&#x3D;tinysrgb&amp;w&#x3D;2000&amp;fit&#x3D;max&amp;ixid&#x3D;eyJhcHBfaWQiOjExNzczfQ"
            srcset="https://images.unsplash.com/photo-1572288717056-ea97fb77c71e?ixlib&#x3D;rb-1.2.1&amp;q&#x3D;80&amp;fm&#x3D;jpg&amp;crop&#x3D;entropy&amp;cs&#x3D;tinysrgb&amp;w&#x3D;2000&amp;fit&#x3D;max&amp;ixid&#x3D;eyJhcHBfaWQiOjExNzczfQ"
            data-srcset="https://images.unsplash.com/photo-1572288717056-ea97fb77c71e?ixlib&#x3D;rb-1.2.1&amp;q&#x3D;80&amp;fm&#x3D;jpg&amp;crop&#x3D;entropy&amp;cs&#x3D;tinysrgb&amp;w&#x3D;2000&amp;fit&#x3D;max&amp;ixid&#x3D;eyJhcHBfaWQiOjExNzczfQ 300w,https://images.unsplash.com/photo-1572288717056-ea97fb77c71e?ixlib&#x3D;rb-1.2.1&amp;q&#x3D;80&amp;fm&#x3D;jpg&amp;crop&#x3D;entropy&amp;cs&#x3D;tinysrgb&amp;w&#x3D;2000&amp;fit&#x3D;max&amp;ixid&#x3D;eyJhcHBfaWQiOjExNzczfQ 600w"
            data-sizes="(max-width: 1000px) 400px, 600px"
            alt="AWS and their Billions in IPv4 addresses"
        />
    </a>

    <div class="cr-inner u-padding15 u-flexColumnTop">
        <div class="cr-body">
                <h2 class="cr-t u-fontSize21 u-lineClamp2 u-contentTitle" style="margin-bottom:5px"><a href="../aws-and-their-billions-in-ipv4-addresses/index.html">AWS and their Billions in IPv4 addresses</a></h2>
        </div>

        <div class="hh-date u-flexCenter u-textMuted u-fontSizeSmaller">
    <time class="datetime u-textCapitalize" datetime="2020-10-20">20 Oct 2020</time>
    <span class="bull">&bull;</span>
    <span class="readingTime" style="cursor:default" title="4 min read">4 min read</span>
    
</div>    </div>

    <a href="../aws-and-their-billions-in-ipv4-addresses/index.html" class="u-absolute0 zindex3" aria-label="AWS and their Billions in IPv4 addresses"></a>
</div>
            </div>
            <div class="col s12 m6 l4 u-flex">
                <div class="cr u-overflowHidden u-flexColumnTop u-relative u-flex1 godo-tracking" data-event-category="Article" data-event-action="Related Posts" data-event-label="http://toonk.io/aws-network-performance-deep-dive/" data-event-non-interaction="true">
    <a href="../aws-network-performance-deep-dive/index.html" class="cr-img u-relative u-overflowHidden u-sizeFullWidth u-block">
        <img class="cr-imagen u-absolute u-image u-block blur-up lazyload"
            src="https://images.unsplash.com/photo-1571864156103-d3c37503b6af?ixlib&#x3D;rb-1.2.1&amp;q&#x3D;80&amp;fm&#x3D;jpg&amp;crop&#x3D;entropy&amp;cs&#x3D;tinysrgb&amp;w&#x3D;2000&amp;fit&#x3D;max&amp;ixid&#x3D;eyJhcHBfaWQiOjExNzczfQ"
            srcset="https://images.unsplash.com/photo-1571864156103-d3c37503b6af?ixlib&#x3D;rb-1.2.1&amp;q&#x3D;80&amp;fm&#x3D;jpg&amp;crop&#x3D;entropy&amp;cs&#x3D;tinysrgb&amp;w&#x3D;2000&amp;fit&#x3D;max&amp;ixid&#x3D;eyJhcHBfaWQiOjExNzczfQ"
            data-srcset="https://images.unsplash.com/photo-1571864156103-d3c37503b6af?ixlib&#x3D;rb-1.2.1&amp;q&#x3D;80&amp;fm&#x3D;jpg&amp;crop&#x3D;entropy&amp;cs&#x3D;tinysrgb&amp;w&#x3D;2000&amp;fit&#x3D;max&amp;ixid&#x3D;eyJhcHBfaWQiOjExNzczfQ 300w,https://images.unsplash.com/photo-1571864156103-d3c37503b6af?ixlib&#x3D;rb-1.2.1&amp;q&#x3D;80&amp;fm&#x3D;jpg&amp;crop&#x3D;entropy&amp;cs&#x3D;tinysrgb&amp;w&#x3D;2000&amp;fit&#x3D;max&amp;ixid&#x3D;eyJhcHBfaWQiOjExNzczfQ 600w"
            data-sizes="(max-width: 1000px) 400px, 600px"
            alt="100G networking in AWS, a network performance deep dive"
        />
    </a>

    <div class="cr-inner u-padding15 u-flexColumnTop">
        <div class="cr-body">
                <h2 class="cr-t u-fontSize21 u-lineClamp2 u-contentTitle" style="margin-bottom:5px"><a href="../aws-network-performance-deep-dive/index.html">100G networking in AWS, a network performance deep dive</a></h2>
        </div>

        <div class="hh-date u-flexCenter u-textMuted u-fontSizeSmaller">
    <time class="datetime u-textCapitalize" datetime="2020-10-15">15 Oct 2020</time>
    <span class="bull">&bull;</span>
    <span class="readingTime" style="cursor:default" title="9 min read">9 min read</span>
    
</div>    </div>

    <a href="../aws-network-performance-deep-dive/index.html" class="u-absolute0 zindex3" aria-label="100G networking in AWS, a network performance deep dive"></a>
</div>
            </div>
        </div>
    </div>
</div>


    <div id="post-comments" class="post-comments js-comments u-hide u-bgColorGrayLight u-paddingTop30 u-paddingBottom30 u-contentTitle">
    <div class="u-container u-maxWidth1000 u-card">
        <div id="disqus_thread"></div>
    </div>
</div>


    <div class="share-sticky u-textAlignRight is-visible">
    <div class="share-sticky-wrap buttonSet u-container u-maxWidth1200">
        <span class="u-textMuted u-fontSize15 u-paddingRight10 u-hide-before-md">Share this article:</span>
        <a href="https://www.facebook.com/sharer/sharer.php?u=http://toonk.io/building-a-high-available-anycast-application-in-5-minutes-on-packet/"
            target="_blank"
            rel="noopener noreferrer"
            title="Share on Facebook"
            class="godo-tracking button button--s bg-facebook u-textColorWhite js-share"
            data-event-category="Article"
            data-event-action="Share"
            data-event-label="Facebook - Sticky Footer"
            data-event-non-interaction="true">
            <svg class="icon"><use xlink:href="#icon-facebook"></use></svg>
            Share
        </a>
        <a href="https://twitter.com/share?text=Building%20a%20high%20available%20Anycast%20application%20in%205%20minutes%20on%20Packet&amp;url=http://toonk.io/building-a-high-available-anycast-application-in-5-minutes-on-packet/"
            target="_blank"
            rel="noopener noreferrer"
            title="Share on Twitter"
            class="godo-tracking button button--s bg-twitter u-textColorWhite js-share"
            data-event-category="Article"
            data-event-action="Share"
            data-event-label="Twitter - Sticky Footer"
            data-event-non-interaction="true">
            <svg class="icon"><use xlink:href="#icon-twitter"></use></svg>
            Tweet
        </a>
        <a href="whatsapp://send?text=http://toonk.io/building-a-high-available-anycast-application-in-5-minutes-on-packet/"
            target="_blank"
            rel="noopener noreferrer"
            class="godo-tracking button button--s u-textColorWhite bg-whatsapp u-hide-after-lg"
            data-event-category="Article"
            data-event-action="Share"
            data-event-label="Whatsapp - Sticky Footer"
            data-event-non-interaction="true">
            <svg class="icon"><use xlink:href="#icon-whatsapp"></use></svg>
            Send
        </a>
    </div>
</div></main>

        <div class="instagram js-instagram u-hide u-relative u-bgColorGrayLight"></div>

        <footer class="footer">
    <section class="container">
        <div class="row">
            <div class="col s12 m6 l4 u-marginBottom30 u-flexColumnTop">
                <div class="footer-items u-flexColumnTop u-flex--1">
                    <h3 class="footer-items-title u-underline u-fontSize22">Toonk.io</h3>
                    <div class="footer-b u-flex--1">
                        <p>Thoughts, stories and wild ideas from the world of Infrastructure Engineering.</p>
                    </div>

                    <div class="js-social-media social-media u-flex">
    
    <a class="godo-tracking" data-event-category="Header" data-event-action="Social" data-event-label="Twitter" data-event-non-interaction="true" title="Twitter @atoonk" aria-label="Twitter @atoonk" href="https://twitter.com/atoonk" target="_blank" rel="noopener noreferrer">
        <svg class="icon icon--twitter"><use xlink:href="#icon-twitter"></use></svg>
    </a>
</div>
                </div>
            </div>

            <div class="col s12 m6 l4 u-marginBottom30 u-flexColumnTop">
                <div class="footer-items footer-tags u-flex--1">
                    <h3 class="footer-items-title u-underline u-fontSize22">Tags</h3>
                    <div class="buttonSet">
                        <a href="../tag/networking/index.html" title="networking"
                            class="u-textCapitalize button button--outline-success">networking</a>
                        <a href="../tag/terraform/index.html" title="terraform"
                            class="u-textCapitalize button button--outline-success">terraform</a>
                        <a href="../tag/aws/index.html" title="aws"
                            class="u-textCapitalize button button--outline-success">aws</a>
                        <a href="../tag/mysocket/index.html" title="mysocket"
                            class="u-textCapitalize button button--outline-success">mysocket</a>
                        <a href="../tag/anycast/index.html" title="anycast"
                            class="u-textCapitalize button button--outline-success">anycast</a>
                        <a href="../tag/ddos/index.html" title="ddos"
                            class="u-textCapitalize button button--outline-success">ddos</a>
                    </div>
                </div>
            </div>



            <div class="col s12 u-textAlignCenter">
                <nav class="footer-menu u-marginBottom30 ">
                    <ul class="nav" role="menu">
    <li role="menuitem"><a href="../author/andree/index.html" class="nav-author">Author</a></li>
</ul>
                </nav>
            </div>



            <div class="col s12 u-paddingTop20 u-textAlignCenter u-fontSizeSmaller">
                &copy; 2021 Andree&#x27;s Musings.
            </div>
        </div>
    </section>
</footer>
    </div>

    <div class="search u-fixed u-flexColumnTop u-flexCenter u-fixed u-absolute0">
    <div class="js-search-close search-shader u-absolute0 zindex1"></div>
    <div class="js-search-close button button--circle button--dark search-close zindex3 u-hide-after-lg">
        <svg class="icon icon--close icon--md"><use xlink:href="#icon-close"></use></svg>
    </div>

    <div class="search-inner u-relative u-marginAuto zindex2">
        <div class="search-wrap">
            <form class="search-form u-sizeFullWidth u-flex u-flexCenter u-fontSizeBase">
                <svg class="icon icon--search icon--md icon--gray"><use xlink:href="#icon-search"></use></svg>
                <input id="search-field" class="u-sizeFullWidth input--md" type="text" placeholder="Search..." aria-label="Search box"/>
            </form>
            <span class="js-search-message search-message u-block u-hide">No results found</span>
            <div id="search-results" class="search-results u-marginAuto u-sizeFullWidth"></div>
        </div>
        <div class="search-nav-hints u-flex u-flexEnd u-hide-before-lg">
            <div class="search-nav-hint"><span>↑</span> <span>↓</span> Navigate up/down</div>
            <div class="search-nav-hint"><span>Enter</span> Go to article</div>
            <div class="search-nav-hint"><span>/</span> Search new term</div>
            <div class="search-nav-hint"><span>Esc</span> Close search</div>
        </div>
    </div>
</div>

    
    <div class="loadingBar"></div>

    <div class="back-to-top js-back-to-top u-hide-before-lg u-pointer u-fixed">
        <svg class="back-to-top-icon" width="24px" height="69px" viewBox="0 0 24 69"><g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g transform="translate(2.000000, 2.000000)"><rect fill="currentColor" x="9" y="7" width="2" height="60"></rect><polygon stroke="currentColor" stroke-width="2" points="10 0 20 13 0 13"></polygon></g></g></svg>        <p class="back-to-top-text u-fontSizeBase u-fontWeightMedium">GO TOP</p>
    </div>


    <svg aria-hidden="true" style="position:absolute;width:0;height:0" version="1.1" xmlns="http://www.w3.org/2000/svg" overflow="hidden"><defs><symbol id="icon-sunny" viewBox="0 0 24 24"><title>sunny</title><path d="M12 18.141a.722.722 0 0 0-.722.722v2.166a.722.722 0 0 0 1.444 0v-2.166a.722.722 0 0 0-.722-.722zM12 2.25a.722.722 0 0 0-.722.722v2.166a.722.722 0 0 0 1.444 0V2.972A.722.722 0 0 0 12 2.25zM5.859 12a.722.722 0 0 0-.722-.722H2.971a.722.722 0 0 0 0 1.444h2.166A.722.722 0 0 0 5.859 12zm15.169-.722h-2.166a.722.722 0 0 0 0 1.444h2.166a.722.722 0 0 0 0-1.444zM7.148 16.13a.72.72 0 0 0-.511.211l-1.533 1.533a.72.72 0 0 0 0 1.022.72.72 0 0 0 1.022 0l1.533-1.533a.72.72 0 1 0-.511-1.233zm9.704-8.26a.72.72 0 0 0 .511-.211l1.533-1.533a.72.72 0 0 0 0-1.022.72.72 0 0 0-1.022 0l-1.533 1.533a.72.72 0 0 0 0 1.022.72.72 0 0 0 .511.211zM6.127 5.105a.72.72 0 0 0-1.022 0 .72.72 0 0 0 0 1.022L6.638 7.66a.72.72 0 0 0 1.022 0 .72.72 0 0 0 0-1.022L6.127 5.105zm11.235 11.236a.72.72 0 0 0-1.022 0 .725.725 0 0 0 0 1.022l1.533 1.533a.72.72 0 0 0 1.022 0 .72.72 0 0 0 0-1.022l-1.533-1.533zM12 7.5c-2.48 0-4.5 2.02-4.5 4.5s2.02 4.5 4.5 4.5 4.5-2.02 4.5-4.5-2.02-4.5-4.5-4.5z"/></symbol><symbol id="icon-moon" viewBox="0 0 32 32"><title>moon</title><path d="M25.087 22.137c-.181.006-.363.012-.544.012a11.018 11.018 0 0 1-7.925-3.337c-2.119-2.15-3.281-5.006-3.281-8.05 0-1.731.381-3.406 1.094-4.919.194-.412.581-1.038.85-1.462.119-.181-.031-.419-.244-.381-.375.056-.95.181-1.731.425C8.443 5.969 5 10.544 5 15.937 5 22.6 10.319 28 16.881 28c3.625 0 6.875-1.65 9.056-4.256.375-.45.719-.863 1.025-1.363.113-.188-.044-.419-.256-.381-.531.106-1.069.113-1.619.137z"/></symbol><symbol id="icon-arrow" viewBox="0 0 24 24"><title>arrow</title><path d="M3.984 13.002h12.174l-5.611 5.611L12 20.016 20.016 12 12 3.984l-1.403 1.403 5.561 5.611H3.984v2.004z"/></symbol><symbol id="icon-close" viewBox="0 0 24 24"><title>close</title><path d="M18.984 6.412l-1.397-1.397-5.588 5.588-5.588-5.588-1.397 1.397L10.602 12l-5.588 5.588 1.397 1.397 5.588-5.588 5.588 5.588 1.397-1.397L13.396 12z"/></symbol><symbol id="icon-comments" viewBox="0 0 24 24"><title>comments</title><path d="M20.203 15.028c0-.206.056-.403.155-.572.028-.052.066-.098.098-.145a7.594 7.594 0 0 0 1.294-4.233c.014-4.322-3.633-7.828-8.142-7.828-3.933 0-7.214 2.677-7.983 6.23a7.563 7.563 0 0 0-.173 1.603c0 4.327 3.506 7.927 8.016 7.927.717 0 1.683-.216 2.213-.361s1.055-.338 1.191-.389a1.23 1.23 0 0 1 .909.014l2.658.942s.112.047.183.047a.373.373 0 0 0 .375-.375c0-.047-.023-.127-.023-.127l-.769-2.733z"/><path d="M14.93 18.398c-.169.047-.384.098-.619.15-.492.103-1.12.211-1.594.211-4.509 0-8.016-3.6-8.016-7.927 0-.309.033-.703.07-1.003a6.33 6.33 0 0 1 .108-.6c.047-.211.103-.422.164-.628l-.375.333c-1.537 1.341-2.419 3.253-2.419 5.245 0 1.373.398 2.695 1.163 3.844.108.164.169.291.15.375s-.558 2.906-.558 2.906a.375.375 0 0 0 .127.361c.07.056.155.084.239.084a.331.331 0 0 0 .136-.028l2.63-1.036a.725.725 0 0 1 .267-.052s.113-.009.295.061c.886.347 1.866.563 2.845.563a7.363 7.363 0 0 0 5.63-2.583s.15-.206.323-.45c-.173.061-.37.122-.567.173z"/></symbol><symbol id="icon-star" viewBox="0 0 24 24"><title>star</title><path d="M21.703 9h-6.895l-2.095-6.253c-.103-.305-.389-.497-.712-.497s-.609.192-.712.497L9.194 9H2.252a.752.752 0 0 0-.75.75c0 .042.005.089.014.127.009.164.084.347.314.53l5.667 3.994-2.175 6.323a.752.752 0 0 0 .258.844c.136.098.262.183.422.183.155 0 .337-.08.469-.169l5.531-3.942 5.531 3.942a.876.876 0 0 0 .469.169c.159 0 .286-.08.417-.183a.742.742 0 0 0 .258-.844l-2.175-6.323 5.62-4.031.136-.117c.122-.131.244-.309.244-.502 0-.413-.384-.75-.797-.75z"/></symbol><symbol id="icon-link" viewBox="0 0 24 24"><title>link</title><path d="M13.125 15.989l-.056.005a.778.778 0 0 0-.45.211l-3.028 3.028c-.642.642-1.5.994-2.414.994s-1.772-.352-2.414-.994c-.642-.642-.994-1.5-.994-2.414s.352-1.772.994-2.414l3.216-3.216a3.425 3.425 0 0 1 1.228-.788c.225-.084.464-.141.703-.173a3.38 3.38 0 0 1 .478-.033c.066 0 .131.005.216.009.83.052 1.613.403 2.194.984.361.361.638.802.802 1.28a.737.737 0 0 0 .905.473c.005 0 .009-.005.014-.005s.009 0 .009-.005c.38-.117.6-.516.492-.895-.206-.731-.572-1.345-1.153-1.922a4.935 4.935 0 0 0-2.7-1.373 4.768 4.768 0 0 0-1.148-.052 4.744 4.744 0 0 0-.759.117c-.052.009-.098.023-.15.037a4.882 4.882 0 0 0-2.212 1.275l-3.216 3.216c-.919.933-1.43 2.17-1.43 3.492s.511 2.559 1.439 3.487a4.91 4.91 0 0 0 3.483 1.434 4.898 4.898 0 0 0 3.488-1.439l3.061-3.061c.487-.492.094-1.327-.595-1.261z"/><path d="M20.311 3.689c-.928-.928-2.166-1.439-3.483-1.439s-2.559.511-3.487 1.439l-2.986 2.986a.753.753 0 0 0 .473 1.284.759.759 0 0 0 .595-.216l2.991-2.981c.642-.642 1.5-.994 2.414-.994s1.772.352 2.414.994c.642.642.994 1.5.994 2.414s-.352 1.772-.994 2.414l-3.216 3.216a3.425 3.425 0 0 1-1.228.788 3.255 3.255 0 0 1-.703.173 3.38 3.38 0 0 1-.478.033c-.066 0-.136-.005-.216-.009a3.406 3.406 0 0 1-2.194-.984c-.342-.342-.6-.75-.769-1.195a.748.748 0 0 0-.895-.459.758.758 0 0 0-.53.961c.211.656.567 1.214 1.111 1.758l.009.009a4.935 4.935 0 0 0 3.853 1.425 4.882 4.882 0 0 0 3.117-1.425l3.216-3.216c.928-.928 1.439-2.166 1.439-3.487s-.52-2.559-1.448-3.488z"/></symbol><symbol id="icon-search" viewBox="0 0 24 24"><title>search</title><path d="M20.789 19.697l-5.006-5.053a7.173 7.173 0 0 0-5.607-11.649c-3.966 0-7.177 3.216-7.177 7.177s3.211 7.172 7.177 7.172c1.716 0 3.286-.6 4.523-1.603l4.973 5.02a.768.768 0 0 0 1.088.028.775.775 0 0 0 .028-1.092zm-10.612-3.895c-1.505 0-2.92-.586-3.984-1.65s-1.65-2.48-1.65-3.98c0-1.505.586-2.92 1.65-3.98 1.064-1.064 2.48-1.65 3.984-1.65s2.92.586 3.984 1.65a5.597 5.597 0 0 1 1.65 3.98c0 1.505-.586 2.92-1.65 3.98a5.6 5.6 0 0 1-3.984 1.65z"/></symbol><symbol id="icon-send" viewBox="0 0 24 24"><title>send</title><path d="M20.433 3.042l-17.208 7.5a.394.394 0 0 0 .014.717l4.655 2.63a.75.75 0 0 0 .858-.084l9.178-7.913c.061-.052.206-.15.263-.094.061.061-.033.202-.084.263l-7.941 8.944a.748.748 0 0 0-.075.895l3.042 4.88c.15.295.577.291.712-.009l7.116-17.208a.394.394 0 0 0-.53-.52z"/></symbol><symbol id="icon-heart" viewBox="0 0 24 24"><title>heart</title><path d="M16.5 2.625h-.047c-1.861 0-3.506.984-4.453 2.438-.947-1.453-2.592-2.438-4.453-2.438H7.5a5.3 5.3 0 0 0-5.25 5.297c0 1.734.759 4.195 2.241 6.22C7.313 18 12 21.375 12 21.375s4.688-3.375 7.509-7.233c1.481-2.025 2.241-4.486 2.241-6.22a5.3 5.3 0 0 0-5.25-5.297z"/></symbol><symbol id="icon-rss" viewBox="0 0 24 24"><title>rss</title><path d="M5.62 15.755A2.624 2.624 0 0 0 3 18.371a2.613 2.613 0 0 0 2.62 2.606c1.448 0 2.62-1.167 2.62-2.606s-1.172-2.616-2.62-2.616z"/><path d="M3 9v3.745c2.25 0 4.411.666 6 2.255s2.25 3.745 2.25 6H15C15 14.442 9.562 9 3 9z"/><path d="M3 3v3.745c8.016 0 14.245 6.234 14.245 14.255H21c0-9.923-8.063-18-18-18z"/></symbol><symbol id="icon-arrow-forward" viewBox="0 0 24 24"><title>arrow-forward</title><path d="M13.786 12L7.828 6.047c-.441-.441-.441-1.153 0-1.589s1.153-.436 1.594 0l6.75 6.745c.427.427.436 1.111.033 1.552l-6.778 6.792c-.22.22-.511.328-.797.328s-.577-.108-.797-.328a1.12 1.12 0 0 1 0-1.589L13.786 12z"/></symbol><symbol id="icon-twitter" viewBox="0 0 24 24"><title>twitter</title><path d="M23.063 5.133a9.165 9.165 0 0 1-2.606.717 4.555 4.555 0 0 0 1.997-2.513 9.04 9.04 0 0 1-2.883 1.102 4.54 4.54 0 0 0-7.852 3.103c0 .356.038.703.117 1.036A12.865 12.865 0 0 1 2.48 3.83a4.55 4.55 0 0 0 1.411 6.066 4.442 4.442 0 0 1-2.063-.567v.056a4.542 4.542 0 0 0 3.642 4.453c-.38.103-.783.159-1.195.159-.291 0-.577-.028-.853-.084a4.547 4.547 0 0 0 4.242 3.155 9.098 9.098 0 0 1-6.722 1.879A12.686 12.686 0 0 0 7.889 21c8.358 0 12.923-6.923 12.923-12.928 0-.197-.005-.394-.014-.586a9.228 9.228 0 0 0 2.264-2.353z"/></symbol><symbol id="icon-linkedin" viewBox="0 0 24 24"><title>linkedin</title><path d="M19.556 3H4.537C3.717 3 3 3.591 3 4.402v15.052c0 .816.717 1.542 1.537 1.542h15.014c.825 0 1.444-.731 1.444-1.542V4.402C21 3.591 20.376 3 19.556 3zM8.578 18H6V9.984h2.578V18zm-1.2-9.234h-.019C6.534 8.766 6 8.152 6 7.383 6 6.6 6.548 6 7.392 6s1.359.595 1.378 1.383c0 .769-.534 1.383-1.392 1.383zM18 18h-2.578v-4.383c0-1.05-.375-1.767-1.308-1.767-.713 0-1.134.483-1.322.952-.07.169-.089.398-.089.633v4.566h-2.578V9.985h2.578v1.116c.375-.534.961-1.303 2.325-1.303 1.692 0 2.972 1.116 2.972 3.52v4.683z"/></symbol><symbol id="icon-facebook" viewBox="0 0 24 24"><title>facebook</title><path d="M20.006 3H3.993a.995.995 0 0 0-.994.994v16.013c0 .548.445.994.994.994h8.006v-7.125H9.847v-2.625h2.152V9.31c0-2.325 1.612-3.591 3.689-3.591.994 0 2.063.075 2.311.108v2.428h-1.655c-1.13 0-1.345.534-1.345 1.322v1.673h2.691l-.352 2.625h-2.339V21h5.006a.995.995 0 0 0 .994-.994V3.993a.995.995 0 0 0-.994-.994z"/></symbol><symbol id="icon-github" viewBox="0 0 24 24"><title>github</title><path d="M12 1.5C6.202 1.5 1.5 6.323 1.5 12.267c0 4.758 3.009 8.789 7.181 10.214a.831.831 0 0 0 .178.019c.389 0 .539-.286.539-.534 0-.258-.009-.933-.014-1.833a4.805 4.805 0 0 1-1.059.127c-2.02 0-2.48-1.57-2.48-1.57-.478-1.242-1.167-1.575-1.167-1.575-.914-.642-.005-.661.066-.661h.005c1.055.094 1.608 1.116 1.608 1.116.525.919 1.228 1.177 1.856 1.177.492 0 .938-.159 1.2-.281.094-.694.366-1.167.666-1.439-2.33-.272-4.781-1.195-4.781-5.32 0-1.177.408-2.137 1.078-2.887-.108-.272-.469-1.369.103-2.85 0 0 .075-.023.234-.023.38 0 1.238.145 2.653 1.13a9.85 9.85 0 0 1 2.63-.361 9.877 9.877 0 0 1 2.63.361c1.416-.984 2.273-1.13 2.653-1.13.159 0 .234.023.234.023.572 1.481.211 2.578.103 2.85.67.755 1.078 1.716 1.078 2.887 0 4.134-2.456 5.044-4.795 5.311.375.333.713.989.713 1.992 0 1.439-.014 2.602-.014 2.953 0 .253.145.539.534.539a.921.921 0 0 0 .188-.019c4.177-1.425 7.181-5.461 7.181-10.214 0-5.944-4.702-10.767-10.5-10.767z"/></symbol><symbol id="icon-instagram" viewBox="0 0 24 24"><title>instagram</title><path d="M15.75 4.5c.994 0 1.936.394 2.648 1.102S19.5 7.257 19.5 8.25v7.5c0 .994-.394 1.936-1.102 2.648S16.743 19.5 15.75 19.5h-7.5c-.994 0-1.936-.394-2.648-1.102S4.5 16.743 4.5 15.75v-7.5c0-.994.394-1.936 1.102-2.648S7.257 4.5 8.25 4.5h7.5zm0-1.5h-7.5C5.363 3 3 5.363 3 8.25v7.5C3 18.638 5.363 21 8.25 21h7.5c2.888 0 5.25-2.362 5.25-5.25v-7.5C21 5.363 18.638 3 15.75 3z"/><path d="M16.875 8.25c-.623 0-1.125-.502-1.125-1.125S16.252 6 16.875 6a1.125 1.125 0 0 1 0 2.25zM12 9c1.655 0 3 1.345 3 3s-1.345 3-3 3-3-1.345-3-3 1.345-3 3-3zm0-1.5c-2.484 0-4.5 2.016-4.5 4.5s2.016 4.5 4.5 4.5 4.5-2.016 4.5-4.5-2.016-4.5-4.5-4.5z"/></symbol><symbol id="icon-youtube" viewBox="0 0 24 24"><title>youtube</title><path d="M23.841 6.975c0-2.109-1.552-3.806-3.469-3.806A169.616 169.616 0 0 0 12.422 3h-.844c-2.7 0-5.353.047-7.95.169-1.912 0-3.464 1.706-3.464 3.816A68.603 68.603 0 0 0 0 11.991a71.766 71.766 0 0 0 .159 5.011c0 2.109 1.552 3.82 3.464 3.82 2.728.127 5.527.183 8.372.178 2.85.009 5.639-.047 8.372-.178 1.917 0 3.469-1.711 3.469-3.82.112-1.673.164-3.342.159-5.016a68.815 68.815 0 0 0-.155-5.011zM9.703 16.589V7.378l6.797 4.603-6.797 4.608z"/></symbol><symbol id="icon-whatsapp" viewBox="0 0 24 24"><title>whatsapp</title><path d="M12.19 1.5C6.497 1.5 1.881 6.08 1.881 11.73c0 1.933.541 3.74 1.479 5.282L1.499 22.5l5.708-1.813a10.334 10.334 0 0 0 4.983 1.272c5.694 0 10.31-4.58 10.31-10.23s-4.616-10.23-10.31-10.23zm5.127 14.115c-.243.601-1.339 1.15-1.823 1.175s-.497.375-3.133-.77-4.221-3.93-4.346-4.11-1.021-1.455-.973-2.74c.049-1.285.752-1.891 1.003-2.143s.538-.298.714-.301c.208-.003.342-.006.496-.001s.384-.032.584.499c.2.531.677 1.835.738 1.968s.099.287.005.458c-.094.171-.143.278-.279.426s-.289.33-.412.443c-.137.125-.28.261-.136.528s.64 1.142 1.396 1.863c.971.927 1.809 1.234 2.067 1.374s.413.125.573-.044c.16-.169.686-.738.872-.992s.359-.205.597-.109c.238.096 1.507.776 1.766.916s.431.212.493.323c.062.112.042.634-.2 1.236z"/></symbol><symbol id="icon-map" viewBox="0 0 24 24"><title>map</title><path stroke-linejoin="round" stroke-linecap="round" stroke-miterlimit="4" stroke-width="2" fill="none" d="M21 10c0 7-9 13-9 13s-9-6-9-13c0-4.971 4.029-9 9-9s9 4.029 9 9z"/><path stroke-linejoin="round" stroke-linecap="round" stroke-miterlimit="4" stroke-width="2" fill="none" d="M15 10a3 3 0 1 1-6 0 3 3 0 1 1 6 0z"/></symbol><symbol id="icon-reddit" viewBox="0 0 28 28"><title>reddit</title><path d="M28 13.219A3.105 3.105 0 0 1 26.297 16c.125.484.187.984.187 1.5 0 4.937-5.578 8.937-12.453 8.937-6.859 0-12.437-4-12.437-8.937 0-.5.063-1 .172-1.469A3.135 3.135 0 0 1 0 13.219a3.107 3.107 0 0 1 5.375-2.125c2.109-1.469 4.922-2.422 8.047-2.531L15.235.422a.547.547 0 0 1 .641-.406l5.766 1.266a2.337 2.337 0 0 1 4.422 1.047 2.34 2.34 0 0 1-2.344 2.344 2.334 2.334 0 0 1-2.328-2.328l-5.219-1.156-1.625 7.375c3.141.094 5.984 1.031 8.109 2.5a3.063 3.063 0 0 1 2.234-.953A3.107 3.107 0 0 1 28 13.22zM6.531 16.328a2.338 2.338 0 0 0 2.328 2.344 2.34 2.34 0 0 0 2.344-2.344A2.338 2.338 0 0 0 8.859 14a2.334 2.334 0 0 0-2.328 2.328zm12.656 5.547a.557.557 0 0 0 0-.812.566.566 0 0 0-.797 0c-.938.953-2.953 1.281-4.391 1.281s-3.453-.328-4.391-1.281a.566.566 0 0 0-.797 0 .557.557 0 0 0 0 .812c1.484 1.484 4.344 1.594 5.187 1.594s3.703-.109 5.187-1.594zm-.046-3.203a2.338 2.338 0 0 0 2.328-2.344A2.334 2.334 0 0 0 19.141 14a2.338 2.338 0 0 0-2.344 2.328 2.34 2.34 0 0 0 2.344 2.344z"/></symbol></defs></svg>
    <script>
        var siteUrl = 'http://toonk.io';
        var siteSearch = '/assets/scripts/search.js?v=8201fb5932';
        var sitePrismJs = '/assets/scripts/prismjs.js?v=8201fb5932';
        var sitePrismJscomponents = '/assets/scripts/components/';
    </script>

    <script>
var followSocialMedia = {
  'linkedin': ['https://www.linkedin.com/in/atoonk/','linkedin'],
    'github': ['https://github.com/atoonk/','Github'],

  'rss': ["https://toonk.io/rss/index.xml",'RSS'],

};
</script>
<script>
var disqusShortName = 'toonk-io-1';
</script>

    <script src="../assets/scripts/main.js%3Fv=8201fb5932"></script>


    

    <script>
(function(d, s, id) {
    if (typeof disqusShortName === 'undefined') return;

    var disqus_config = function () {
        this.page.url = 'http://toonk.io/building-a-high-available-anycast-application-in-5-minutes-on-packet/';
        this.page.identifier = 'ghost-5f53e3ba3680d46e73ec617b';
    };

    d.querySelector('.js-comments').classList.remove('u-hide')
    /*var disqusComments = d.querySelectorAll('.js-comments');
    disqusComments.forEach(function(item){item.classList.remove('u-hide')});*/

    function loadDisqus() {
        var currentScroll = d.scrollingElement.scrollTop;
        var disqusTarget = d.getElementById('disqus_thread');

        if (d.getElementById(id)) return;

        if( disqusTarget && (currentScroll > disqusTarget.getBoundingClientRect().top - 150) ) {
            var js = d.createElement(s);
            js.id = id;
            js.src = 'https://'+disqusShortName+'.disqus.com/embed.js';
            js.async = true;
            js.defer = true;
            js.setAttribute('data-timestamp', +new Date());
            d.body.appendChild(js);

            window.removeEventListener('scroll', loadDisqus);
        }
    }

    window.addEventListener('scroll', loadDisqus);

    document.querySelector('.js-dark-mode').addEventListener('click', function() {
        if (window.DISQUS) {
            DISQUS.reset({
                reload: true,
                config: disqus_config
            });
        }
    });
}(document, 'script', 'disqus-js'));
</script>

</body>
</html>
